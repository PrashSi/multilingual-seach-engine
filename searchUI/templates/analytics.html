<script>
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawPie);

function drawPie() {
  var pie = JSON.parse('{{ analytics['pie_data'] | tojson | safe }}');
  if (Object.keys(pie).length > 0) {
    var data = google.visualization.arrayToDataTable([
      ['Sentiment', 'Number of Tweets'],
      ['Positive',      pie['pos']],
      ['Negative',      pie['neg']],
      ['Neutral',     pie['neu']],
    ]);

    var options = {
      title: 'Sentiment Analysis'
    };

    var chart = new google.visualization.PieChart(document.getElementById('piechart'));

    chart.draw(data, options);
  }
};
</script>

{% if analytics['pie_data']|length > 1%}
  <div id="piechart" style="width: 400px; height: 300px;""></div>
{% endif %}


<script>
google.charts.load('current', {
        'packages':['geochart'],
        // Note: you will need to get a mapsApiKey for your project.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
});
google.charts.setOnLoadCallback(drawRegionsMap);


function drawRegionsMap() {
  var country = JSON.parse('{{ analytics['country'] | tojson | safe }}');
  if (Object.keys(country).length > 0) {
    var data = google.visualization.arrayToDataTable([
      ['Country',     'Popularity'],
      ['Germany',     country['Germany']],
      ['United States', country['United_States']],
      ['Brazil',    country['Brazil']],
      ['Canada',    country['Canada']],
      ['RU',      country['RU']],
    ]);

    // var data = google.visualization.arrayToDataTable([
    //   ['Country',    'Popularity'],
    //   ['Germany',    100],
    //   ['United States', 300],
    //   ['Brazil',     600],
    //   ['Canada',     900],
    //   ['RU',       1200],
    // ]);

    var options = {};

    var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

    chart.draw(data, options);
  }
};
</script>

{% if analytics['country']|length > 1 %}
  <div id="regions_div" style="width: 100%;"></div>
{% endif %}

<!-- <div class="row">
  <div class="column">
    <img src="/static/figs/pie.png" alt="pie" style="width:100%">
  </div>
  <div class="column">
    <img src="/static/figs/density.png" alt="density" style="width:100%">
  </div>
</div> -->

<!-- <div class="row">
  <div class="column">
    <img src="/static/figs/tagcloud.png" alt="tagcloud" style="width:100%">
  </div>
  <div class="column">
    <img src="/static/figs/heatmap.png" alt="heatmp" style="width:100%">
  </div>
</div> -->